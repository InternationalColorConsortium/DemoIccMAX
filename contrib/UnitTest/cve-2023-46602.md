# Unit Test: Convert ICC to XML - CVE-2023-46602

This unit test script verifies the functionality of converting an ICC profile to an XML format using the `iccToXml` tool. It specifically tests against the CVE-2023-46602 vulnerability to ensure the conversion process is executed correctly and safely.

## Description

The script converts an ICC profile file (`cve-2023-46602.icc`) to an XML output file (`cve-2023-46602.xml`). The test is considered successful if the tool outputs the expected result, indicating the XML file was created successfully. This test is essential for verifying that the conversion handles edge cases and vulnerabilities as expected.

## Prerequisites

Before running the script, ensure the following prerequisites are met:

- **Zsh**: This script is designed to run with `zsh`.
- **iccToXml Tool**: Ensure the `iccToXml` tool is built and located in the `Build/Tools/IccToXml/` directory.
- **CVE-2023-46602 Test Files**: The `cve-2023-46602.icc` test file should be present in the `contrib/UnitTest/` directory.

## Script Breakdown

1. **Banner**:  
   The script prints a banner indicating the test purpose and description.

2. **Variables**:  
   The script defines key variables such as:
   - `SCRIPT_DIR`: The current directory of the script.
   - `PROJECT_ROOT`: The root directory of the project.
   - `BUILD_TOOLS_DIR`: The directory containing the `iccToXml` tool.
   - `ICC_FILE`: The input ICC file for the test (`cve-2023-46602.icc`).
   - `XML_OUTPUT`: The output XML file path (`cve-2023-46602.xml`).
   - `EXPECTED_OUTPUT`: The expected output message indicating success.

3. **Running the Test**:  
   The script runs the `iccToXml` command, converting the ICC profile to XML, and captures the output.

4. **Validation**:  
   The output is checked to determine if the expected success message is present. Based on the result, the script will:
   - Print `PASS` if the XML file was created successfully.
   - Print `FAIL` and display the output if the test did not pass.

## How to Run

1. **Navigate to the Project Directory**:
   Make sure you are in the root directory of the project.

```
 Build/Tools/IccToXml/iccToXml contrib/UnitTest/cve-2023-46602.icc contrib/UnitTest/cve-2023-46602.xml
```

**Expected Output**

```
XML successfully created
```
